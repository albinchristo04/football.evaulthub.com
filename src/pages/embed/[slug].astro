---
import { slugify } from '../../utils/slugify';

export async function getStaticPaths() {
  const response = await fetch('https://raw.githubusercontent.com/albinchristo04/blogger-autopost/refs/heads/main/rojadirecta_events.json');
  const data = await response.json();
  const events = data.events || [];

  const paths = [];
  events.forEach((event: any) => {
    const matchSlug = slugify(`${event.country}-${event.description}`);
    event.channels.forEach((ch: any, index: number) => {
      paths.push({
        params: { slug: `${matchSlug}-ch${index + 1}` },
        props: { url: ch.decoded_url }
      });
    });
  });
  return paths;
}

const { url } = Astro.props;
---

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player | football.evaulthub.com</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
    <!-- Popup Ad -->
    <script src="https://pl26869306.effectivegatecpm.com/22/9f/cc/229fcc7fac3be2c689fa4fa174ce4169.js"></script>
</head>
<body>
    <iframe 
        src={url} 
        allowfullscreen 
        scrolling="no"
    ></iframe>
</body>
</html>
